# 2.1 何谓重构

视上下文不同，“重构”这个词有两种不同的定义。

第一个定义是名词形式。

> 重构（名词）：对软件内部结构的一种调整，目的是在不改变软件可观察行为的前提下，提高其可理解性，降低其修改成本。

“重构”的另一个用法是动词形式。

> 重构（动词）：使用一系列重构手法，在不改变软件可观察行为的前提下，调整其结构。

重构提供了一种更高效且受控的代码整理技术。

重构的目的是使软件更容易被理解和修改。可以在软件内部做很多修改，但必须对软件可观察的外部行为只造成很小变化，或甚至不造成变化。与之形成对比的是性能对比。和重构一样，性能优化通常不会改变组件的行为（除了执行速度），只会改变其内部结构。

## 两顶帽子

使用重构技术开发软件时，应该把自己的时间分配给两种截然不同的行为：添加新功能，以及重构。

添加新功能时，不应该修改既有代码，只管添加新功能。通过测试（并让测试正常运行），可以衡量自己的工作进度。重构时就不能再添加功能，只管改进程序结构。此时不应该添加任何测试（除非发现有先前遗漏的东西），只在绝对必要（用以处理接口变化）时才修改测试。

